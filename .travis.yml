sudo: required
language: node_js
node_js:
    - 7
services:
  - docker
cache:
  directories:
    - website/node_modules

script:
  - docker run -ti --rm --volume `pwd`/:/tectonic:z fabianhauser/tectonic:0.1.6 problem-statement/problem-statement.tex
  - mv problem-statement/problem-statement.pdf website/src/
  - cd website
  - npm install
  - node build.js

deploy:
  - provider: script
    skip_cleanup: true
    script: sh gh-pages.sh output/ git@github.com:redbackup/redbackup.org.git gh-pages redbackup.org
    on:
      branch: master

